\input{common-header}
\input{frontcover}
\input{regulatory}
\input{updates}

% paper title
% Titles are generally capitalised except for words such as a, an, and, as,
% at, but, by, for, in, nor, of, on, or, the, to and up, which are usually
% not capitalised unless they are the first or last word of the title.
% Linebreaks \\ can be used within to get better formatting as desired.
% Do not put math or special symbols in the title.

\cleardoublepage

\pagenumbering{roman}

\begin{titlepage}
    \pagecolor{blue}
     \begin{center}
       {
         \large
         % Put a nice amount of vertical space before the title
         \vspace*{2cm}
               {\Huge\textcolor{white}{\bf{MEGA65 REFERENCE GUIDE}}}\\
             \vspace{\fill}
                    {\textcolor{white}
                    {Published by \\ the MEGA Museum of Electronic Games \& Art e.V., Germany.}}
       }
     \end{center}
   \end{titlepage}

% Then the copyright notice page
  \pagecolor{white}\textcolor{black}
  \vfill
  WORK IN PROGRESS

  \index{copyright}Copyright \copyright 2019 -- 2021 by Paul Gardner-Stephen,
  the MEGA Museum of Electronic Games \& Art e.V.,
  and contributors.

  This reference guide is made available under the GNU Free Documentation
  License v1.3, or later, if desired. This means that you are free to
  modify, reproduce and redistribute this reference guide, subject to
  certain conditions. The full text of the GNU Free Documentation
  License v1.3 can be found at
  \url{https://www.gnu.org/licenses/fdl-1.3.en.html}.

  Implicit in this copyright license, is the permission to duplicate
  and/or redistribute this document in whole or in part for use in
  education environments. We want to support the education of future
  generations, so if you have any worries or concerns, please contact us.

   \par\today

\newpagestyle{onlynumber}{\setfoot[][{\bf\small\thepage}][]
                                  {} {\bf\small\thepage} {}}
\pagestyle{onlynumber}
\pagecolor{white}

\tableofcontents

%% XXX - big numbers are not in bold, because latex gets confused
\newcommand*{\justifyheading}{\raggedleft}
\definecolor{headingblue}{rgb}{0.5,0.5,1}

% \titleformat{command}[shape]
%   {format}
%   {label}
%   {sep}
%   {before}
%   [after]

% ***************
% PART title page
% ***************

\titleclass{\part}{top}
\titleformat{\part}[display]
   {\thispagestyle{empty}\pagecolor{blue}\normalfont\huge\bfseries\justifyheading}
   {\textcolor{white}{\fontsize{50}{65}\selectfont\bf{PART}\quad{\fontsize{100}{130}\selectfont \bf{\serifed\thepart}}}}
   {20pt}
   {\Huge\textcolor{white}}
   [\newpage\pagecolor{white}\textcolor{black}]

% ******************
% CHAPTER title page
% ******************

\titleformat{\chapter}[display]
   {\thispagestyle{empty}\pagecolor{blue}\normalfont\huge\bfseries\justifyheading}
   {\textcolor{white}{\MakeUppercase{\chaptertitlename}\quad{\fontsize{100}{130}\selectfont \bf\thechapter}}}
   {20pt}
   {\Huge\textcolor{white}}
   [{\chapmtoc\insertminitoc}\newpage\pagecolor{white}\textcolor{black}\cleardoublepage]

% ******************
% SECTION title page
% ******************

\titleformat{\section}[display]
   {\raggedright}
   {\thesection}
   {20pt}
   {\huge\bf\color{headingblue}\uppercase}
   [\color{black}]

\part{PREFACE}

\input{introduction}

\cleardoublepage
\pagenumbering{bychapter}

\part{GETTING TO KNOW YOUR MEGA65}

\input{settingup}
\input{gettingstarted}
\input{screen-editor}
\input{configuring}
\input{cores-and-flashing}
\input{freezer}

\part{FIRST STEPS IN CODING}

\input{howcomputerswork}
\input{beginninginbasic}
\input{text-processing}
\input{morebasic}
\input{datainbasic}
\input{modes}

\part{SOUND AND GRAPHICS}

\input{graphics}
\input{sprites}
\input{sound}

\part{HARDWARE}

\input{nexys4ddr-setup}

\part{CROSS-PLATFORM DEVELOPMENT TOOLS}

\input{emulators}
\input{transferanddebugging}
\input{assemblers}
\input{ccompilers}
\input{libc}
\input{basictokenisers}


\part{APPENDICES}

\begin{appendices}

  \input{appendix-accessories}
  \input{basic-fragments}
  \input{appendix-basic65-indexed}
  \input{appendix-basicabbreviations}
  \input{appendix-screencodes}
  \input{appendix-petsciicodes}
  \input{appendix-keyboard}
  \input{appendix-screenmaps}
  \input{appendix-error-messages}
  \input{appendix-decbinhex-tutorial}
  \input{appendix-mathfunctions}
  \input{appendix-pinouts}
  \input{appendix-memorymap}
  \input{appendix-45gs02-registers}
  \input{appendix-instructionset}
  \input{developing-system-programs}
  {\input{appendix-hypervisor-calls}}
  \input{appendix-monitor}
  \input{appendix-dmagic}
  \input{appendix-viciv-registers}
  \input{appendix-sid-registers}
  \input{appendix-cia6526-registers}
  \input{appendix-uart4551-registers}
  \input{appendix-45e100-registers}
  \input{appendix-45io27-registers}
  \input{appendix-sound-registers}
  \input{appendix-reference-tables}
  \input{appendix-mega65r2-flashing}
  \input{appendix-troubleshooting}
  \input{appendix-target-specific}
  \input{appendix-schematics}
  \input{appendix-donors}
\end{appendices}


\nocite{*}
\bibliographystyle{IEEEtran}
\bibliography{references}

\pagenumbering[Index]{bychapter}
\printindex

\cleardoublepage

% Temporarily enlarge this page to push
%% down the bottom margin
\enlargethispage{3\baselineskip}
\thispagestyle{empty}
\pagecolor[HTML]{2244FF}

\begin{center}
\begin{minipage}{.8\textwidth}
\color{white}
\begin{center}
{ \huge\bfseries\sffamily\color{white}About the MEGA65 Book }
\end{center}

\vspace{3mm}
\hrulefill
\vspace{3mm}

{
C64 and C65 program and peripheral compatibility ... amazing sound ... true arcade-class graphics
... beautifully finished hardware ... full mechanical keyboard ... rich networking capabilities
and one of the fastest 6502-class processors avaiable make the MEGA65 truly unique for home, business
or educational use.

\vspace{2mm}

{\bf The MEGA65 Complete Compendium} collects into a single huge volume all the information you need to know about
your MEGA65.  Collecting all of the key information of the various MEGA65 user's guides and reference
manuals in once place, this book provides detailed information on every topic, including BASIC programming,
sound, graphics, networking, assembly language programming, cross-platform development, including using
high-level languages like C or KickC, the MEGA65's powerful 8-bit chipset, and how to use its powerful
FPGA core to implement other computer systems.

\vspace{2mm}

This book is the must-have reference for the MEGA65, that every user, whether beginner or advanced, should
have with them when exploring the full potential of the MEGA65.

\vspace{2mm}

With authors including professional writers, university lecturers and 8-bit experts, the content is
both accessible and extensive.  Beginners will find detailed explanations of how to get started,
while advanced users will find highly detailed technical information on the inner workings of  every
aspect of the MEGA65.

\vspace{2mm}

In short, this book is designed for you to get the most out of the MEGA65's extensive capabilities.
}

\end{minipage}
\end{center}

\vspace*{\stretch{1}}

\begin{center}
\colorbox{white}{\EANisbn[SC4,ISBN=123-45-67890-12-8]}

\vspace*{\baselineskip}

\textbf{\textcolor{white}{the MEGA Museum of Electronic Games \& Art e.V. \url{http://mega65.org}}}

\textbf{\textcolor{white}{Editor: Dr. Paul Gardner-Stephen.}}

\end{center}


\input{common-footer}

